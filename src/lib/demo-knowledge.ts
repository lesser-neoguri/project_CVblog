/**
 * RAG용 지식 청크: 캐릭터·연애·상담형 웹툰 기반 AI 챗봇 프로젝트 내용을 섹션 단위로 분할
 */
export const WEBTOON_CHATBOT_CHUNKS = [
  {
    id: 'goal',
    title: '목표와 문제 정의',
    text: `목표: 캐릭터/연애/상담 중심의 대화 UX. 웹툰 설정과 사건을 바탕으로 "작품 안에서 말하는" 느낌. 원작 흐름을 존중하면서도 what-if 분기(대체 전개) 가능.
흔한 실패 포인트: 캐릭터 말투가 5~10턴 후 무너짐. 웹툰 내용을 통째로 넣으면 토큰 한계와 혼선. "기억"이 없어 관계/감정선이 이어지지 않음. what-if가 즉흥 소설이 되어 설정 붕괴.`,
  },
  {
    id: 'arch',
    title: '전체 아키텍처',
    text: `4개 레이어: (1) LLM 대화 생성기 (2) RAG 웹툰 지식 검색·주입 (3) Memory/State 관계·감정·사건 기록 (4) Simulator what-if 분기 진행 엔진. 핵심은 모델이 모든 걸 기억하게 두지 않고, 외부 레이어가 컨텍스트를 정리해 모델에게 제공하는 것.`,
  },
  {
    id: 'character-card',
    title: '캐릭터 카드 (고정)',
    text: `Character Card 고정 정보: 정체성(세계관 속 역할, 배경), 말투 규칙(어휘, 어미, 금지 표현), 가치관/금기(절대 하지 않는 행동), 관계 성향(친밀/거리감/질투). 캐릭터 카드는 변하지 않아야 하고, 씬 카드(가변)만 업데이트해야 캐릭터가 안 무너진다.`,
  },
  {
    id: 'scene-card',
    title: '씬 카드 (가변)',
    text: `Scene Card 가변 정보: 현재 장소·시간·상황, 등장인물·감정 상태·직전 사건 요약, 이번 턴 목적(연애/상담/스토리 진행/설정 Q&A). Output Rules: 메타발언 금지, 전체 문장 말투 유지, 출력 포맷 고정(대사+행동+선택지).`,
  },
  {
    id: 'rag',
    title: 'RAG 웹툰 지식 주입',
    text: `RAG 파이프라인: 웹툰 내용을 chunk로 분할 → 각 chunk 임베딩 생성·벡터DB 저장 → 유저 입력 시 관련 chunk top-k 검색 → 검색 결과를 근거로 컨텍스트에 붙여 LLM 답변 생성. chunk 전략: 화/씬 단위, 장면 요약·사건 인과·캐릭터 감정·설정/룰 포함. what-if는 "설정"뿐 아니라 "사건의 원인-결과"를 검색해 넣어야 일관성 유지.`,
  },
  {
    id: 'state',
    title: 'State 기반 시뮬레이터',
    text: `World State: 주요 사건 진행도, 비밀 정보 공개 여부, 현재 갈등 축. Character State: 감정(불안/분노/호감), 목표, 체력/상처/자원. Relationship State: 친밀도/호감도/신뢰도, 최근 상호작용 사건 로그. 분기 진행: 유저 선택 입력 → 세계관 룰+캐릭터 카드로 다음 사건 후보 생성 → 상태 업데이트 → 장면 진행. 최근 사건 로그를 유지하면 설정 붕괴가 줄어든다.`,
  },
  {
    id: 'mode-routing',
    title: 'Mode Routing',
    text: `연애 모드: 플러팅, 거리감, 호감도 변화. 상담 모드: 공감/질문/정리, 현실 조언 vs 세계관 조언 구분. 스토리 모드: 사건 진행 우선, 선택지 제공. 설정 Q&A 모드: 세계관 정보 설명(캐릭터 말투 유지). 라우팅은 처음엔 룰 기반 키워드로도 MVP 가능.`,
  },
  {
    id: 'mvp',
    title: 'MVP 구성',
    text: `캐릭터 카드 1개 + 씬 카드 템플릿. 웹툰 데이터: 화별 요약/인물관계/핵심 사건부터 구축. RAG 연결(벡터DB top-k). State: 호감도/신뢰도 + 사건 로그 최근 10개. 고정 출력 포맷: 대사 + 행동 묘사 + 다음 선택지 2~3개.`,
  },
  {
    id: 'prompt-template',
    title: '프롬프트 입력 구조',
    text: `[Character Card] 고정, [Scene Card] 가변, [Retrieved Lore] RAG 결과, [State] 관계/감정/사건 로그, [Rules] 금지/말투/출력 포맷. 이 구조로 쌓으면 캐릭터 유지+설정 근거+분기 진행이 동시에 안정화된다.`,
  },
];

export type KnowledgeChunk = (typeof WEBTOON_CHATBOT_CHUNKS)[number];
